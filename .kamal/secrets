# Secrets defined here are available for reference under registry/password, env/secret, builder/secrets,
# and accessories/*/env/secret in config/deploy.yml. All secrets should be pulled from either
# password manager, ENV, or a file. DO NOT ENTER RAW CREDENTIALS HERE! This file needs to be safe for git.

# Grab the registry password from ENV
KAMAL_REGISTRY_PASSWORD=$KAMAL_REGISTRY_PASSWORD

# Improve security by using a password manager. Never check config/master.key or config/credentials/*.key into git!
RAILS_MASTER_KEY=$(cat config/credentials/production.key)

# Either use .env or rails credentials to store database password.
# HOSTEDGPT_DATABASE_PASSWORD=$HOSTEDGPT_DATABASE_PASSWORD
credentials=$(bin/rails credentials:show --environment production)
HOSTEDGPT_DATABASE_PASSWORD=$(echo "$credentials" | yq '.database.password // "password"')

# Used by postgres:16 image to set password
POSTGRES_PASSWORD=$HOSTEDGPT_DATABASE_PASSWORD
